{"openapi":"3.0.1","info":{"title":"User Service APIs","description":"API documentation for User Service","version":"1.0"},"servers":[{"url":"http://localhost:8081","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"User Controller","description":"Manage user profile, password, and account operations"},{"name":"Authentication APIs","description":"Endpoints for user registration, activation, login, and token management"}],"paths":{"/api/user/profile":{"get":{"tags":["User Controller"],"summary":"Get user profile","description":"Retrieves the profile of the currently authenticated user","operationId":"getProfile","responses":{"200":{"description":"Profile retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserProfileResponse"}}}},"401":{"description":"Unauthorized"}},"security":[{"bearerAuth":[]}]},"put":{"tags":["User Controller"],"summary":"Update user profile","description":"Updates the user's nickname and/or profile image","operationId":"updateProfile","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"image":{"type":"string","format":"binary"},"nickname":{"type":"string"}}}}}},"responses":{"200":{"description":"Profile updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseMapStringString"}}}},"401":{"description":"Unauthorized"},"400":{"description":"Invalid file format or input"}},"security":[{"bearerAuth":[]}]}},"/api/user/reset-password":{"post":{"tags":["User Controller"],"summary":"Reset password","description":"Resets the user's password using the reset code sent to email","operationId":"resetPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"Password reset successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}},"400":{"description":"Invalid reset code or password"}},"security":[{"bearerAuth":[]}]}},"/api/user/logout":{"post":{"tags":["User Controller"],"summary":"Logout user","description":"Logs out the currently authenticated user and invalidates the access token","operationId":"logout","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"401":{"description":"Invalid or missing token"},"200":{"description":"User logged out successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}}},"security":[{"bearerAuth":[]}]}},"/api/user/forget-password":{"post":{"tags":["User Controller"],"summary":"Request password reset","description":"Sends a password reset code to the user's email","operationId":"forgetPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"Reset code sent successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}},"400":{"description":"Invalid email"}},"security":[{"bearerAuth":[]}]}},"/api/user/change-password":{"post":{"tags":["User Controller"],"summary":"Change password","description":"Changes the password for the currently authenticated user","operationId":"changePassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized"},"200":{"description":"Password changed successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}},"400":{"description":"Invalid input"}},"security":[{"bearerAuth":[]}]}},"/api/auth/resend-otp":{"post":{"tags":["Authentication APIs"],"summary":"Resend OTP","description":"Resends OTP code to the user's email","operationId":"resendOtp","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResendOtpRequest"}}},"required":true},"responses":{"200":{"description":"OTP resent successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}},"404":{"description":"Email not found or already activated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}}}}},"/api/auth/register":{"post":{"tags":["Authentication APIs"],"summary":"Register a new user","description":"Creates a new user account and sends an OTP for verification","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"400":{"description":"Invalid input or email already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}},"200":{"description":"User registered successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}}}}},"/api/auth/refresh":{"post":{"tags":["Authentication APIs"],"summary":"Refresh access token","description":"Generates a new access token using a valid refresh token","operationId":"refreshToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"401":{"description":"Invalid or expired refresh token","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseAuthResponse"}}}},"200":{"description":"Token refreshed successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseAuthResponse"}}}}}}},"/api/auth/login":{"post":{"tags":["Authentication APIs"],"summary":"User login","description":"Authenticates user and returns access and refresh tokens","operationId":"signIn","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"401":{"description":"Invalid credentials or account not activated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseAuthResponse"}}}},"200":{"description":"User logged in successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseAuthResponse"}}}}}}},"/api/auth/activate":{"post":{"tags":["Authentication APIs"],"summary":"Activate account","description":"Activates user account using OTP code sent to email","operationId":"activate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivateAccountRequest"}}},"required":true},"responses":{"200":{"description":"Account activated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}},"400":{"description":"Invalid OTP or email not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseObject"}}}}}}},"/api/user":{"delete":{"tags":["User Controller"],"summary":"Delete user account","description":"Deletes the account of the currently authenticated user","operationId":"deleteUserAccount","responses":{"401":{"description":"Unauthorized"},"200":{"description":"Account deleted successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiGenericResponseMapStringString"}}}}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"ApiGenericResponseMapStringString":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","additionalProperties":{"type":"string"}},"errors":{"type":"object","additionalProperties":{"type":"string"}}}},"ResetPasswordRequest":{"required":["confirmPassword","email","newPassword","resetCode"],"type":"object","properties":{"email":{"type":"string","description":"User's email","example":"user@example.com"},"resetCode":{"type":"string","description":"Reset code sent to email","example":"123456"},"newPassword":{"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$","type":"string","description":"New password","example":"NewPass@1234"},"confirmPassword":{"type":"string","description":"Confirm new password","example":"NewPass@1234"}},"description":"Request to reset password using reset code"},"ApiGenericResponseObject":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object"},"errors":{"type":"object","additionalProperties":{"type":"string"}}}},"ForgetPasswordRequest":{"required":["email"],"type":"object","properties":{"email":{"type":"string","description":"User email","example":"user@example.com"}},"description":"Request to initiate password reset"},"ChangePasswordRequest":{"required":["confirmPassword","currentPassword","newPassword"],"type":"object","properties":{"currentPassword":{"type":"string","description":"Current password","example":"OldPass@123"},"newPassword":{"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$","type":"string","description":"New password","example":"NewPass@123"},"confirmPassword":{"type":"string","description":"Confirm new password","example":"NewPass@123"}},"description":"Request to change user password"},"ResendOtpRequest":{"required":["email"],"type":"object","properties":{"email":{"type":"string","description":"User email","example":"user@example.com"}},"description":"Request to resend OTP code"},"RegisterRequest":{"required":["confirmPassword","email","password"],"type":"object","properties":{"email":{"type":"string","description":"User's email","example":"user@example.com"},"password":{"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$","type":"string","description":"Password (must meet complexity requirements)","example":"Pass@1234"},"confirmPassword":{"type":"string","description":"Confirmation of the password","example":"Pass@1234"}},"description":"Request to register new user"},"RefreshTokenRequest":{"required":["refreshToken"],"type":"object","properties":{"refreshToken":{"type":"string","description":"Refresh token","example":"refresh-token-abc123"}},"description":"Request to refresh access token"},"ApiGenericResponseAuthResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/AuthResponse"},"errors":{"type":"object","additionalProperties":{"type":"string"}}}},"AuthResponse":{"type":"object","properties":{"token":{"type":"string","description":"JWT token","example":"eyJhbGciOiJIUzI1..."},"refreshToken":{"type":"string","description":"Refresh token","example":"d2ViLXNlc3Npb24tdG9rZW4="}},"description":"Authentication response containing access and refresh tokens"},"LoginRequest":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string","description":"Email for login","example":"user@example.com"},"password":{"type":"string","description":"User's password","example":"Pass@1234"}},"description":"Request to login user"},"ActivateAccountRequest":{"required":["email","otp"],"type":"object","properties":{"email":{"type":"string","description":"User email","example":"user@example.com"},"otp":{"type":"string","description":"One-time OTP","example":"123456"}},"description":"Request to activate an account using OTP"},"UserProfileResponse":{"type":"object","properties":{"nickname":{"type":"string","description":"User nickname","example":"Ahmed"},"profileImageUrl":{"type":"string","description":"Profile image URL","example":"https://domain.com/image.png"}},"description":"User profile response"}},"securitySchemes":{"bearerAuth":{"type":"http","name":"bearerAuth","scheme":"bearer","bearerFormat":"JWT"}}}}